<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="{{ csrf_token }}">
    <title>Login - Bog'cha</title>
    <link rel="shortcut icon" href="/static/assets/compiled/svg/favicon.svg" type="image/x-icon">
    <link rel="stylesheet" href="/static/assets/compiled/css/app.css">
    <link rel="stylesheet" href="/static/assets/compiled/css/app-dark.css">
    <link rel="stylesheet" href="/static/assets/compiled/css/auth.css">
</head>

<body>
    <div id="auth">
        <div class="row h-100">
            <div class="col-lg-5 col-12">
                <div id="auth-left">
                    <div class="auth-logo">
                        <!-- <a href="index.html"><img src="static/assets/compiled/svg/logo.svg" alt="Logo"></a> -->
                    </div>
                    <h1 class="auth-title">Kirish</h1>

                    <form id="login-form" method="post" action="{% url 'login' %}">
                        {% csrf_token %}
                        <div class="form-group position-relative has-icon-left mb-4">
                            <input type="text" id="username" class="form-control form-control-xl" name="username" placeholder="Username">
                            <div class="form-control-icon">
                                <i class="bi bi-person"></i>
                            </div>
                        </div>
                        <div class="form-group position-relative has-icon-left mb-4">
                            <input type="password" id="password" class="form-control form-control-xl" name="password" placeholder="Password">
                            <div class="form-control-icon">
                                <i class="bi bi-shield-lock"></i>
                            </div>
                        </div>
                        <div class="form-group position-relative has-icon-left mb-4">
                            <input type="checkbox" name="keep_me_logged_in"> Hisobim tizimga kirgan holatda qolsin
                        </div>
                        <button type="submit" class="btn btn-primary btn-block btn-lg shadow-lg mt-5">Login</button>
                        {% if error %}
                        <p style="color:red;">{{ error }}</p>
                        {% endif %}
                    </form>
                    <div class="text-center mt-5 text-lg fs-4">
                        <p class="text-gray-600">Hisobingiz yo'qmi?<a href="{% url 'register' %}" class="font-bold">Sign up</a>.</p>
                        <!-- <p><a class="font-bold" href="{% url 'reset_password' %}">Forgot password?</a></p> -->
                    </div>
                </div>
            </div>
            <div class="col-lg-7 d-none d-lg-block">
                <div id="auth-right"></div>
            </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- <script>
        $(document).ready(function() {
            $('#login-form').on('submit', function(event) {
                event.preventDefault();
                const username = $('#username').val();
                const password = $('#password').val();

                $.ajax({
                    url: '/api/login/',
                    method: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({ username: username, password: password }),
                    success: function(data) {
                        localStorage.setItem('access_token', data.access);
                        localStorage.setItem('refresh_token', data.refresh);
                        window.location.href = '/'; // Home sahifaga yo'naltirish
                    },
                    error: function(xhr) {
                        console.error('Login xatoligi:', xhr.responseText);
                        alert('Login yoki parol noto‘g‘ri.');
                    }
                });
            });
        });
    </script> -->
</body>

</html>
